process {
    publishDir = { "${params.outdir}/${task.process.tokenize(':')[-1].tokenize('_')[0].toLowerCase()}" }
    withName: "IMAGE_RESAMPLE" {
        ext.voxel_size = 1
        ext.interp = "lin"
    }
    withName: "IMAGE_CROPVOLUME_T1" {
        ext.output_bbox = true
        ext.first_suffix = "t1"
    }
    withName: "PREPROC_N4" {
        cpus = 1
    }
    withName: "DENOISING_NLMEANS" {
        ext.number_of_coils = 1
        ext.gaussian = true
        ext.sigma = 0.5
    }
    withName: "BETCROP_SYNTHSTRIP" {
        memory = "8G"
        ext.nocsf = true
    }
}
